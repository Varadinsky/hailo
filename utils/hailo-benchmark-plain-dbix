#!/usr/bin/env perl
use 5.010;
use strict;
use Benchmark ':all';

my $tests = $ARGV[0] // 5;

cmpthese($tests, {
    "DBIx::Class" => sub {
        state $test = 1;
        say STDERR "Testing DBIx::Class $test/$tests";
        system q< ANY_MOOSE=Mouse prove -Ilib -r $(find t -type f -name '*.t'|grep -v -e switch-order -e babble -e exhaustive -e command/run ) >;
        $test++;
    },
    "Hailo + DBI" => sub {
        state $test = 1;
        say STDERR "Testing Hailo + DBI $test/$tests";
        system q< ANY_MOOSE=Mouse prove       -r $(find t -type f -name '*.t'|grep -v -e switch-order -e babble -e exhaustive -e command/run ) >;
        $test++;
    }
});
